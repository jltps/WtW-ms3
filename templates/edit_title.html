{% extends "base.html" %}
{% block content %}

    <h3 class="purple-text center-align">Edit title</h3>

    <div class="row">
        <form class="col s12 m10 l8 offset-m1 offset-l2 z-depth-5" method="POST" action="{{ url_for('edit_title', title_id=title._id) }}">
            
            <!-- Title name -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">local_movies</i>
                    <input id="title_name" name="title_name" value="{{ title.title_name }}" type="text" class="validate" required>
                    <label for="title_name">Name of the title</label>
                </div>
            </div>
            <div class="row">
                
                <!-- Choose type dropdown -->
                <div class="input-field col s12 m6 l6 offset-m3">
                    <select id="title_types" name="title_types" class="validate" required>
                        <option value="" disabled>Choose type of content</option>
                        {% for title_type in title_types %}
                            {% if title_type.type_name == title.type_name %}
                                <option value="{{ title_type.type_name }}" selected>{{ title_type.type_name }}</option>
                            {% else %}
                                <option value="{{ title_type.type_name }}">{{ title_type.type_name }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
                
                <!-- Choose genre dropdown -->
                <div class="input-field col s12 m6 l6 offset-m3">
                    <select id="genres" name="genres" class="validate" required>
                        <option value="" disabled>Choose genre</option>
                        {% for genre in genres %}
                            {% if genre.genre_name == title.genre_name %}
                                <option value="{{ genre.genre_name }}" selected>{{ genre.genre_name }}</option>
                            {% else %}
                                <option value="{{ genre.genre_name }}">{{ genre.genre_name }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <!-- Choose platform dropdown -->
            <div class="row">
                <div class="input-field col s12 m6 l6 offset-m3">
                    <select id="platforms" name="platforms" class="validate" required>
                        <option value="" disabled>Choose platform</option>
                        {% for platform in platforms %}
                            {% if platform.platform_name == title.platform_name %}
                                <option value="{{ platform.platform_name }}" selected>{{ platform.platform_name }}</option>
                            {% else %}
                                <option value="{{ platform.platform_name }}">{{ platform.platform_name }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
                
                <!-- Suitable for all ages toggle -->
                <div class="input-field col s6 offset-s3 l6">
                    <p>
                        <label>
                            {% if title.all_ages == "yes" %}
                                <input type="checkbox" checked="checked" id="all_ages" name="all_ages"/>
                            {% else %}
                                <input type="checkbox" id="all_ages" name="all_ages"/>
                            {% endif %}
                            <span >Check if title is suitable for all ages</span>
                        </label>
                    </p>
                </div>
            </div>
            
            <!-- Year of release -->
            <div class="row">
                <div class="input-field col s6 offset-s3">
                    <input placeholder="Year of release" id="release_year" name="release_year" value="{{ title.release_year }}" type="text" pattern="^[0-9]{4,4}$" class="validate" required>
                    <label for="release_year">Released in:</label>
                </div>
            </div>
            
            <!-- IMDB link -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">language</i>
                    <input id="imdb" name="imdb" value="{{ title.imdb }}" type="text" class="validate" required>
                    <label for="imdb">IMDB link:</label>
                </div>
            </div>
            
            <!-- Title content link -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="material-icons prefix">language</i>
                    <input id="wtw" name="wtw" value="{{ title.wtw }}" type="text" class="validate" required>
                    <label for="wtw">Whatch here link:</label>
                </div>
            </div>
            
            <!-- Recomendation text -->
            <div class="row">
                <div class="input-field col s12">
                    <textarea id="recommendation" name="recommendation" class="materialize-textarea" required>{{- title.recommendation -}}</textarea>
                    <label for="recommendation">Recommendation:</label>
                </div>
            </div> 
            
            <!-- Submit button -->
            <div class="row">
                <div class="col s12 center">
                    <a href="{{ url_for('get_titles') }}" class="btn-large red waves-effect waves-light" type="submit">Cancel
                        <i class="material-icons right">cancel</i></a>
                    <button class="btn-large waves-effect waves-light" type="submit">Save changes
                        <i class="material-icons right">save</i>
                    </button>
                </div>
            </div>

        </form>
    </div>

{% endblock %}